<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MonthVest - Investment Suggestions</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body { font-family: Arial, sans-serif; margin: 0; background-color: #f5f6fa; display: flex; }

    /* Sidebar */
    .sidebar {
        width: 220px; background-color: #6a11cb; color: #fff; 
        display: flex; flex-direction: column; 
        padding: 30px 20px; height: 100vh; 
        position: fixed;
    }
    .sidebar a {
        color: #fff; text-decoration: none; 
        margin-bottom: 20px; font-size: 1.1rem; 
        transition: 0.2s; padding: 10px; 
        border-radius: 6px; display: flex; 
        align-items: center;
    }
    .sidebar a:hover { background-color: #7b33d6; }
    .sidebar a i { margin-right: 10px; }

    /* Main content */
    .main-content { 
        margin-left: 240px; 
        padding: 30px; 
        width: calc(100% - 240px); 
    }
    h2 { margin-bottom: 20px; }

    .suggestion-box {
        background-color: #fff; 
        padding: 20px; 
        border-radius: 10px; 
        margin-bottom: 20px; 
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .risk-badge {
        padding: 6px 15px; 
        border-radius: 6px; 
        color: #fff; 
        font-weight: bold; 
        display: inline-block;
        font-size: 14px;
    }
    .low { background-color: #28a745; }
    .medium { background-color: #fd7e14; }
    .high { background-color: #dc3545; }

    ul li { margin-bottom: 10px; }
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
    <a href="add_investment.html"><i class="fas fa-plus-circle"></i> Add Investment</a>
    <a href="edit_delete.html"><i class="fas fa-edit"></i> Edit / Delete</a>
    <a href="portfolio_trends.html"><i class="fas fa-chart-line"></i> Portfolio Trends</a>
    <a href="investment_tips.html"><i class="fas fa-lightbulb"></i> Investment Tips</a>
    <a href="reports.html"><i class="fas fa-file-alt"></i> Reports</a>
    <a href="user_profile.html"><i class="fas fa-user-circle"></i> User Profile</a>
</div>

<!-- Main Content -->
<div class="main-content">
    <h2>Investment Suggestions</h2>

    <div class="suggestion-box" id="dynamic-suggestions">
        <h3>Personalized Suggestions Based on Your Portfolio</h3>
        <ul id="suggestionList"></ul>
        <p style="margin-top: 15px;">
            Portfolio Risk Level: 
            <span id="riskLevel" class="risk-badge">-</span>
        </p>
    </div>
</div>

<script>
// Fetch investment data from localStorage
let investments = JSON.parse(localStorage.getItem('investments')) || [];
let suggestionList = document.getElementById('suggestionList');
let riskBadge = document.getElementById('riskLevel');

// Function to analyze investments
function generateSuggestions(investments) {
    let suggestions = [];
    let risk = "Low";

    // If no investments
    if(investments.length === 0){
        suggestions.push("No investments found. Start adding your investments to get suggestions.");
        return {suggestions, risk: "Low"};
    }

    // Total invested amount
    let totalInvested = 0;
    let categoryWise = {}; // {Gold: 1000, Mutual Fund: 5000}

    investments.forEach(inv => {
        totalInvested += inv.amount;
        if(!categoryWise[inv.type]) categoryWise[inv.type] = 0;
        categoryWise[inv.type] += inv.amount;
    });

    // Suggestions based on category % allocation
    for(let type in categoryWise){
        let percent = (categoryWise[type] / totalInvested) * 100;

        if(percent < 10){
            suggestions.push(`Your allocation in ${type} is too low (${percent.toFixed(1)}%). Consider increasing it.`);
        }
        if(percent > 60){
            suggestions.push(`Your portfolio is too focused on ${type}. Diversify to reduce risk.`);
        }
    }

    // Risk level based on investment types
    let highRiskAssets = ["Stocks", "Crypto"];
    let highRiskTotal = 0;

    investments.forEach(inv => {
        if(highRiskAssets.includes(inv.type)){
            highRiskTotal += inv.amount;
        }
    });

    let highRiskPercent = (highRiskTotal / totalInvested) * 100;

    if(highRiskPercent > 60){
        risk = "High";
        suggestions.push("Your portfolio is high-risk. Add safer assets like FD, Gold, or Debt Funds.");
    }
    else if(highRiskPercent > 30){
        risk = "Medium";
        suggestions.push("Your portfolio has moderate risk. Maintain balance by adding stable investments.");
    }
    else {
        risk = "Low";
        suggestions.push("Your portfolio is low-risk. Add some growth assets for better returns.");
    }

    if(suggestions.length === 0){
        suggestions.push("Your portfolio is well balanced. Keep monitoring regularly!");
    }

    return {suggestions, risk};
}


// Generate and display suggestions
let result = generateSuggestions(investments);

// Add suggestions to list
suggestionList.innerHTML = "";
result.suggestions.forEach(tip => {
    let li = document.createElement("li");
    li.textContent = tip;
    suggestionList.appendChild(li);
});

// Show risk level
riskBadge.textContent = result.risk;
riskBadge.classList.add(result.risk.toLowerCase());

</script>

</body>
</html>
